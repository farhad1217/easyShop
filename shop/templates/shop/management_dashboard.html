{% extends 'shop/base.html' %}
{% block title %}‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° - EasyShop{% endblock %}
{% block extra_css %}
.admin-theme { background: #1f2937 !important; min-height: 100vh; }
.admin-theme .container { max-width: 900px; }
.admin-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
    color: white;
}
.admin-brand { display: flex; align-items: center; gap: 12px; }
.admin-brand .icon { font-size: 1.8rem; }
.admin-brand h1 { font-size: 1.2rem; margin: 0; }
.admin-brand .sub { font-size: 0.85rem; opacity: 0.8; }
.admin-header-icons a {
    color: white;
    margin-left: 16px;
    text-decoration: none;
    font-size: 1.2rem;
}
.filter-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}
.filter-card {
    background: #374151;
    color: white;
    padding: 20px;
    border-radius: 12px;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    transition: all 0.2s;
}
.filter-card:hover { background: #4b5563; }
.filter-card.active { background: #2563eb; }
.filter-card .count { font-size: 1.8rem; font-weight: 700; }
.filter-card .label { font-size: 0.9rem; opacity: 0.9; }
.nav-cards { display: flex; flex-direction: column; gap: 12px; margin-bottom: 28px; }
.nav-card {
    background: #374151;
    color: white;
    padding: 20px;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-decoration: none;
    transition: background 0.2s;
}
.nav-card:hover { background: #4b5563; }
.nav-card .nav-icon { font-size: 1.5rem; }
.nav-card .nav-text h3 { margin: 0 0 4px 0; font-size: 1rem; }
.nav-card .nav-text p { margin: 0; font-size: 0.8rem; opacity: 0.8; }
.list-entry {
    background: #374151;
    color: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}
.list-entry .user-date { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.list-entry .content { color: #d1d5db; margin: 8px 0; }
.list-entry .actions { display: flex; gap: 8px; }
.list-entry .action-icon {
    width: 36px; height: 36px;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    text-decoration: none;
    font-size: 1.1rem;
}
.action-delete { background: #dc2626; color: white; }
.action-approve { background: #2563eb; color: white; }
.no-lists { color: #9ca3af; text-align: center; padding: 40px; }
.notice-board textarea { width: 100%; padding: 12px; border-radius: 8px; border: none; color: #1f2937; font-family: inherit; resize: vertical; min-height: 80px; }
@media (max-width: 600px) {
    .filter-cards { grid-template-columns: 1fr; }
    .list-entry { flex-direction: column; align-items: flex-start; gap: 12px; }
}
{% endblock %}
{% block content %}
<div class="admin-theme">
<div class="container">
    <nav style="background: transparent; box-shadow: none;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <a href="{% url 'landing_page' %}" style="color: var(--primary);">EasyShop</a>
            <a href="{% url 'user_logout' %}" style="color: var(--primary);">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</a>
        </div>
    </nav>

    <div class="admin-header">
        <div class="admin-brand">
            <span class="icon">üõí</span>
            <div>
                <h1>‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßã‡¶°</h1>
                <span class="sub">‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</span>
            </div>
        </div>
        <div class="admin-header-icons">
            <a href="{% url 'messaging_inbox' %}" title="‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ">üí¨</a>
            <a href="{% url 'user_logout' %}" title="‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü">üö™</a>
        </div>
    </div>

    <div class="notice-board" style="background: #374151; padding: 16px 20px; border-radius: 12px; margin-bottom: 24px;">
        <h3 style="color: white; margin: 0 0 12px 0; font-size: 1rem;">üìå ‡¶®‡ßã‡¶ü‡¶ø‡¶∏ ‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶∏‡¶¨ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá)</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="notice">
            {{ notice_form.content }}
            <button type="submit" style="margin-top: 10px; padding: 8px 16px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer;">‡¶®‡ßã‡¶ü‡¶ø‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </form>
    </div>

    <div class="filter-cards">
        <a href="?filter=total" class="filter-card {% if filter_status == 'total' %}active{% endif %}">
            <div class="count">{{ total_count }}</div>
            <div class="label">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü</div>
        </a>
        <a href="?filter=approved" class="filter-card {% if filter_status == 'approved' %}active{% endif %}">
            <div class="count">{{ approved_count }}</div>
            <div class="label">‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§</div>
        </a>
        <a href="?filter=pending" class="filter-card {% if filter_status == 'pending' %}active{% endif %}">
            <div class="count">{{ pending_count }}</div>
            <div class="label">‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç</div>
        </a>
    </div>

    <div class="nav-cards">
        <a href="{% url 'date_wise_summary' %}" class="nav-card">
            <div style="display: flex; align-items: center; gap: 16px;">
                <span class="nav-icon">üìã</span>
                <div class="nav-text">
                    <h3>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶∏‡¶æ‡¶∞‡¶æ‡¶Ç‡¶∂</h3>
                    <p>‡¶ï‡¶®‡¶∏‡ßã‡¶≤‡¶ø‡¶°‡ßá‡¶ü‡ßá‡¶° ‡¶≠‡¶ø‡¶â</p>
                </div>
            </div>
            <span>‚Üí</span>
        </a>
        <a href="{% url 'user_directory' %}" class="nav-card">
            <div style="display: flex; align-items: center; gap: 16px;">
                <span class="nav-icon">üë•</span>
                <div class="nav-text">
                    <h3>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø</h3>
                    <p>‡¶´‡ßç‡¶Ø‡¶æ‡¶Æ‡¶ø‡¶≤‡¶ø ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</p>
                </div>
            </div>
            <span>‚Üí</span>
        </a>
    </div>

    <h3 style="color: white; margin-bottom: 16px;">‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h3>
    {% if lists %}
    {% for list in lists %}
    <div class="list-entry">
        <div style="flex: 1;">
            <div class="user-date">
                <span>üë§</span>
                <a href="{% url 'user_profile_detail' list.family_id %}" style="color: white;">@{{ list.family.username }}</a>
                <span>{{ list.created_at|date:"M d, Y" }}</span>
                <a href="{% url 'messaging_thread' list.family_id %}" class="action-icon" style="background: #059669; color: white; margin-left: 8px;" title="‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ">üí¨</a>
            </div>
            <div class="content">{{ list.content|default:"-"|linebreaksbr }}</div>
        </div>
        <div class="actions">
            {% if list.status == 'pending' %}
            <a href="{% url 'admin_delete_list' list.pk %}" class="action-icon action-delete" title="‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®" onclick="return confirm('‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?');">üóëÔ∏è</a>
            <a href="{% url 'approve_list' list.pk %}" class="action-icon action-approve" title="‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶®">üëç</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="no-lists">‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§</div>
    {% endif %}
</div>
</div>
{% endblock %}
